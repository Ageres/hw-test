syntax = "proto3";

package event;
option go_package = "./internal/server/grpc/pb";

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

service Calendar {
    rpc GetEvent(GetEventListRequest) returns (GetEventListResponse);
    rpc AddEvent(AddEventRequest) returns (AddEventResponse);
    rpc UpdateEvent(UpdateEventRequest) returns (UpdateEventResponse);
    rpc DeleteEvent(DeleteEventRequest) returns (DeleteEventResponse);
}

message ProtoEvent {
    string id = 1;
    string title = 2;
    google.protobuf.Timestamp start_time = 3;
    google.protobuf.Duration duration = 4;
    string description = 5;
    string user_id = 6;
    google.protobuf.Duration reminder = 7;
}

enum OperationStatus {
    OPERATION_STATUS_UNSPECIFIED = 0;
    OPERATION_STATUS_SUCCESS = 1;
    OPERATION_STATUS_ERROR = 2;
}

enum GetEventListPeriod {
    GET_EVENT_LIST_PERIOD_UNSPECIFIED = 0;
    GET_EVENT_LIST_PERIOD_DAY = 1;
    GET_EVENT_LIST_PERIOD_WEEK = 2;
    GET_EVENT_LIST_PERIOD_MONTH = 3;
}

message GetEventListRequest {
    GetEventListPeriod period = 1;
    google.protobuf.Timestamp start_time = 2;
}

message GetEventListResponse {
    OperationStatus status = 1;
    repeated ProtoEvent events = 2;
    Error error = 3;
}

message AddEventRequest {
    ProtoEvent event = 1;
}

message AddEventResponse {
    OperationStatus status = 1;
    ProtoEvent event = 2;
    Error error = 3;
}

message UpdateEventRequest {
    ProtoEvent event = 1;
}

message UpdateEventResponse {
    OperationStatus status = 1;
    Error error = 2;
}

message DeleteEventRequest {
    string id = 1;
}

message DeleteEventResponse {
    OperationStatus status = 1;
    Error error = 2;
}

enum ServiceName {
    SERVICE_NAME_UNSPECIFIED = 0;
    SERVICE_NAME_CALENDAR = 1;
}

enum ResponseStatus {
    RESPONSE_STATUS_UNSPECIFIED = 0;
    RESPONSE_STATUS_OK = 200;
    RESPONSE_STATUS_BAD_REQUEST = 400;
    RESPONSE_STATUS_NOT_FOUND = 404;
    RESPONSE_STATUS_CONFLICT = 409;
    RESPONSE_STATUS_INTERNAL = 500;
}

message Error {
    ServiceName service_name = 1;
    ResponseStatus status = 2;
    string message = 3;
    string request_id = 4;
    google.protobuf.Timestamp timestamp = 5;
}