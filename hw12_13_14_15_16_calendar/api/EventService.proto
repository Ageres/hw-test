syntax = "proto3";

package event;
option go_package = "./internal/server/grpc";

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

service Calendar {
    rpc GetEvent(GetEventListRequest) returns (GetEventListResponse); // Сохраняем название
    rpc AddEvent(AddEventRequest) returns (AddEventResponse);
    rpc UpdateEvent(UpdateEventRequest) returns (UpdateEventResponse);
    rpc DeleteEvent(DeleteEventRequest) returns (DeleteEventResponse);
}

message ProtoEvent {
    string id = 1;
    string title = 2;
    google.protobuf.Timestamp start_time = 3;
    google.protobuf.Duration duration = 4;
    string description = 5;
    string user_id = 6;
    google.protobuf.Duration reminder = 7;
}

enum GetEventListPeriod {
    GET_EVENT_LIST_PERIOD_UNSPECIFIED = 0;
    GET_EVENT_LIST_PERIOD_DAY = 1;
    GET_EVENT_LIST_PERIOD_WEEK = 2;
    GET_EVENT_LIST_PERIOD_MONTH = 3;
}

message GetEventListRequest {
    GetEventListPeriod period = 1;
    google.protobuf.Timestamp start_time = 2;
}

enum GetEventListStatus {
    GET_EVENT_LIST_STATUS_UNSPECIFIED = 0;
    GET_EVENT_LIST_STATUS_DAY = 1;
    GET_EVENT_LIST_STATUS_WEEK = 2;
    GET_EVENT_LIST_STATUS_MONTH = 3;
}

message GetEventListResponse {
    GetEventListStatus status = 1;
    repeated ProtoEvent events = 2;
    Error error = 3;
}

message AddEventRequest {
    ProtoEvent event = 1;
}

enum AddEventStatus {
    ADD_EVENT_STATUS_UNSPECIFIED = 0;
    ADD_EVENT_STATUS_ADD = 1;
}

message AddEventResponse {
    AddEventStatus status = 1;
    ProtoEvent event = 2;
    Error error = 3;
}

message UpdateEventRequest {
    ProtoEvent event = 1;
}

enum UpdateEventStatus {
    UPDATE_EVENT_STATUS_UNSPECIFIED = 0;
    UPDATE_EVENT_STATUS_UPDATE = 1;
}

message UpdateEventResponse {
    UpdateEventStatus status = 1;
    Error error = 2;
}

message DeleteEventRequest {
    string id = 1;
}

enum DeleteEventStatus {
    DELETE_EVENT_STATUS_UNSPECIFIED = 0;
    DELETE_EVENT_STATUS_DELETE = 1;
}

message DeleteEventResponse {
    DeleteEventStatus status = 1;
    Error error = 2;
}

enum ServiceName {
    SERVICE_NAME_UNSPECIFIED = 0;
    SERVICE_NAME_CALENDAR = 1;
}

message Error {
    ServiceName service_name = 1;
    int32 status = 2;
    string message = 3;
    string request_id = 4;
    google.protobuf.Timestamp timestamp = 5;
}